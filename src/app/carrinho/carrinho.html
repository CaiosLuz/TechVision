<app-menu-superior></app-menu-superior>

<div class="container my-5">
  <div class="row justify-content-center">

    <!-- Coluna principal - produto e prescrição -->
    <div class="col-md-8">
      <div class="card p-4 mb-4">
        <h4 class="fw-bold mb-4">Carrinho de compras</h4>

        <!-- Produto -->
        <div class="d-flex align-items-center border-bottom pb-3 mb-3">
          <img 
            *ngIf="produto?.imagens_produto?.length"
            [src]="produto.imagens_produto[0].url"
            class="img-fluid rounded"
            style="width: 120px; height: auto;"
            alt="Imagem do produto">
          <div class="flex-grow-1">
            <p class="fw-semibold mb-1">{{ produto.nome || 'Atitude AT1718M - Preto Fosco' }}</p>
            <p class="text-muted small mb-0">Qtd: 1</p>
          </div>
          <p class="fw-bold fs-5 mb-0">R$ {{ produto.preco || 321.30 }}</p>
        </div>

        <!-- Seleções -->
        <div class="mb-3">
          <p><strong>Tipo:</strong> {{ tipoLente || 'Grau' }}</p>
          <p><strong>Espessura:</strong> {{ espessura || 'Fina' }}</p>
        </div>

        <!-- Prescrição -->
        <h6 class="fw-bold mb-2">Prescrição Médica:</h6>

        <table class="table table-bordered text-center align-middle">
          <thead class="table-light">
            <tr>
              <th></th>
              <th>Esférico</th>
              <th>Cilíndrico</th>
              <th>Eixo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>OD</td>
              <td>{{ receita?.esfericoOD || '-' }}</td>
              <td>{{ receita?.cilindricoOD || '-' }}</td>
              <td>{{ receita?.eixoOD || '-' }}</td>
            </tr>
            <tr>
              <td>OE</td>
              <td>{{ receita?.esfericoOE || '-' }}</td>
              <td>{{ receita?.cilindricoOE || '-' }}</td>
              <td>{{ receita?.eixoOE || '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Coluna direita - resumo -->
    <div class="col-md-3">
      <div class="card p-4">
        <h5 class="fw-bold">Resumo da Compra</h5>
        <div class="d-flex justify-content-between my-2">
          <span>Subtotal</span>
          <span>R$ {{ produto?.preco || 321.30 }}</span>
        </div>
        <div class="d-flex justify-content-between mb-3">
          <span>Frete</span>
          <span>Grátis</span>
        </div>
        <div class="d-flex justify-content-between border-top pt-2">
          <span class="fw-bold">Total</span>
          <span class="fw-bold fs-5 text-dark">R$ {{ produto?.preco || 321.30 }}</span>
        </div>
        <button class="btn btn-dark w-100 mt-3" (click)="finalizarCompra()">Pagamento →</button>
      </div>
    </div>

  </div>
</div>
